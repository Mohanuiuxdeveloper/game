<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Candy Crush Game</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #ff6b6b, #4ecdc4, #45b7d1, #f9ca24);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .game-container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
            text-align: center;
            backdrop-filter: blur(10px);
        }

        h1 {
            color: #ff6b6b;
            font-size: 2.5em;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .score-board {
            display: flex;
            justify-content: space-around;
            margin-bottom: 20px;
            gap: 20px;
        }

        .score-item {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 10px 20px;
            border-radius: 15px;
            font-weight: bold;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .game-board {
            display: grid;
            grid-template-columns: repeat(8, 50px);
            grid-template-rows: repeat(8, 50px);
            gap: 2px;
            background: #2c3e50;
            padding: 10px;
            border-radius: 15px;
            margin: 0 auto;
            box-shadow: inset 0 0 20px rgba(0, 0, 0, 0.3);
        }

        .candy {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            font-weight: bold;
            color: white;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
            border: 2px solid rgba(255, 255, 255, 0.3);
        }

        .candy:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.4);
        }

        .candy.selected {
            transform: scale(1.2);
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.8);
            border: 3px solid white;
        }

        .candy.matching {
            animation: pulse 0.5s ease-in-out;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.3); }
            100% { transform: scale(1); }
        }

        .candy.falling {
            animation: fall 0.5s ease-in;
        }

        @keyframes fall {
            0% { transform: translateY(-100px); opacity: 0; }
            100% { transform: translateY(0); opacity: 1; }
        }

        .red { background: linear-gradient(135deg, #ff6b6b, #ee5a52); }
        .blue { background: linear-gradient(135deg, #4ecdc4, #44a08d); }
        .green { background: linear-gradient(135deg, #55a3ff, #003d82); }
        .yellow { background: linear-gradient(135deg, #f9ca24, #f0932b); }
        .purple { background: linear-gradient(135deg, #a55eea, #8b5cf6); }
        .orange { background: linear-gradient(135deg, #fd79a8, #fdcb6e); }

        .controls {
            margin-top: 20px;
            display: flex;
            gap: 15px;
            justify-content: center;
        }

        button {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: bold;
            font-size: 16px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
        }

        button:active {
            transform: translateY(0);
        }

        .game-over {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }

        .game-over-content {
            background: white;
            padding: 40px;
            border-radius: 20px;
            text-align: center;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        }

        .game-over h2 {
            color: #ff6b6b;
            font-size: 2em;
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <div class="game-container">
        <h1>üç≠ Candy Crush üç≠</h1>
        
        <div class="score-board">
            <div class="score-item">
                <div>Score</div>
                <div id="score">0</div>
            </div>
            <div class="score-item">
                <div>Moves</div>
                <div id="moves">30</div>
            </div>
            <div class="score-item">
                <div>Level</div>
                <div id="level">1</div>
            </div>
        </div>

        <div class="game-board" id="gameBoard"></div>

        <div class="controls">
            <button onclick="newGame()">New Game</button>
            <button onclick="hint()">Hint</button>
        </div>
    </div>

    <div class="game-over" id="gameOver">
        <div class="game-over-content">
            <h2>Game Over!</h2>
            <p id="finalScore">Final Score: 0</p>
            <button onclick="newGame()">Play Again</button>
        </div>
    </div>

    <script>
        const BOARD_SIZE = 8;
        const CANDY_TYPES = ['üçé', 'üçä', 'üçã', 'üçá', 'üçì', 'üçë'];
        const CANDY_COLORS = ['red', 'orange', 'yellow', 'purple', 'blue', 'green'];
        
        let board = [];
        let score = 0;
        let moves = 30;
        let level = 1;
        let selectedCandy = null;
        let gameActive = true;

        function initializeBoard() {
            board = [];
            for (let i = 0; i < BOARD_SIZE; i++) {
                board[i] = [];
                for (let j = 0; j < BOARD_SIZE; j++) {
                    board[i][j] = getRandomCandy();
                }
            }
            
            // Ensure no initial matches
            while (hasMatches()) {
                for (let i = 0; i < BOARD_SIZE; i++) {
                    for (let j = 0; j < BOARD_SIZE; j++) {
                        if (isPartOfMatch(i, j)) {
                            board[i][j] = getRandomCandy();
                        }
                    }
                }
            }
        }

        function getRandomCandy() {
            const index = Math.floor(Math.random() * CANDY_TYPES.length);
            return {
                type: CANDY_TYPES[index],
                color: CANDY_COLORS[index]
            };
        }

        function renderBoard() {
            const gameBoard = document.getElementById('gameBoard');
            gameBoard.innerHTML = '';
            
            for (let i = 0; i < BOARD_SIZE; i++) {
                for (let j = 0; j < BOARD_SIZE; j++) {
                    const candy = document.createElement('div');
                    candy.className = `candy ${board[i][j].color}`;
                    candy.textContent = board[i][j].type;
                    candy.dataset.row = i;
                    candy.dataset.col = j;
                    candy.addEventListener('click', () => selectCandy(i, j));
                    gameBoard.appendChild(candy);
                }
            }
        }

        function selectCandy(row, col) {
            if (!gameActive) return;
            
            const candyElement = document.querySelector(`[data-row="${row}"][data-col="${col}"]`);
            
            if (selectedCandy) {
                // Remove previous selection
                document.querySelector('.selected')?.classList.remove('selected');
                
                if (selectedCandy.row === row && selectedCandy.col === col) {
                    selectedCandy = null;
                    return;
                }
                
                // Try to swap
                if (isAdjacent(selectedCandy, {row, col})) {
                    swapCandies(selectedCandy, {row, col});
                    selectedCandy = null;
                } else {
                    selectedCandy = {row, col};
                    candyElement.classList.add('selected');
                }
            } else {
                selectedCandy = {row, col};
                candyElement.classList.add('selected');
            }
        }

        function isAdjacent(candy1, candy2) {
            const rowDiff = Math.abs(candy1.row - candy2.row);
            const colDiff = Math.abs(candy1.col - candy2.col);
            return (rowDiff === 1 && colDiff === 0) || (rowDiff === 0 && colDiff === 1);
        }

        function swapCandies(candy1, candy2) {
            const temp = board[candy1.row][candy1.col];
            board[candy1.row][candy1.col] = board[candy2.row][candy2.col];
            board[candy2.row][candy2.col] = temp;
            
            if (hasMatches()) {
                processMatches();
                moves--;
                updateUI();
                
                if (moves <= 0) {
                    endGame();
                }
            } else {
                // Swap back if no matches
                board[candy2.row][candy2.col] = board[candy1.row][candy1.col];
                board[candy1.row][candy1.col] = temp;
            }
            
            renderBoard();
        }

        function hasMatches() {
            for (let i = 0; i < BOARD_SIZE; i++) {
                for (let j = 0; j < BOARD_SIZE; j++) {
                    if (isPartOfMatch(i, j)) {
                        return true;
                    }
                }
            }
            return false;
        }

        function isPartOfMatch(row, col) {
            const candy = board[row][col];
            
            // Check horizontal match
            let horizontalCount = 1;
            let left = col - 1;
            while (left >= 0 && board[row][left].type === candy.type) {
                horizontalCount++;
                left--;
            }
            let right = col + 1;
            while (right < BOARD_SIZE && board[row][right].type === candy.type) {
                horizontalCount++;
                right++;
            }
            
            // Check vertical match
            let verticalCount = 1;
            let up = row - 1;
            while (up >= 0 && board[up][col].type === candy.type) {
                verticalCount++;
                up--;
            }
            let down = row + 1;
            while (down < BOARD_SIZE && board[down][col].type === candy.type) {
                verticalCount++;
                down++;
            }
            
            return horizontalCount >= 3 || verticalCount >= 3;
        }

        function processMatches() {
            const matchedCandies = [];
            
            for (let i = 0; i < BOARD_SIZE; i++) {
                for (let j = 0; j < BOARD_SIZE; j++) {
                    if (isPartOfMatch(i, j)) {
                        matchedCandies.push({row: i, col: j});
                    }
                }
            }
            
            // Animate matched candies
            matchedCandies.forEach(candy => {
                const element = document.querySelector(`[data-row="${candy.row}"][data-col="${candy.col}"]`);
                element?.classList.add('matching');
            });
            
            // Remove matched candies after animation
            setTimeout(() => {
                matchedCandies.forEach(candy => {
                    board[candy.row][candy.col] = null;
                });
                
                score += matchedCandies.length * 10;
                dropCandies();
                fillEmptySpaces();
                
                // Check for new matches
                if (hasMatches()) {
                    setTimeout(() => processMatches(), 300);
                } else {
                    renderBoard();
                }
            }, 500);
        }

        function dropCandies() {
            for (let j = 0; j < BOARD_SIZE; j++) {
                let writePos = BOARD_SIZE - 1;
                for (let i = BOARD_SIZE - 1; i >= 0; i--) {
                    if (board[i][j] !== null) {
                        board[writePos][j] = board[i][j];
                        if (writePos !== i) {
                            board[i][j] = null;
                        }
                        writePos--;
                    }
                }
            }
        }

        function fillEmptySpaces() {
            for (let i = 0; i < BOARD_SIZE; i++) {
                for (let j = 0; j < BOARD_SIZE; j++) {
                    if (board[i][j] === null) {
                        board[i][j] = getRandomCandy();
                    }
                }
            }
        }

        function updateUI() {
            document.getElementById('score').textContent = score;
            document.getElementById('moves').textContent = moves;
            document.getElementById('level').textContent = level;
            
            // Level up every 1000 points
            if (score >= level * 1000) {
                level++;
                moves += 10; // Bonus moves for new level
            }
        }

        function endGame() {
            gameActive = false;
            document.getElementById('finalScore').textContent = `Final Score: ${score}`;
            document.getElementById('gameOver').style.display = 'flex';
        }

        function newGame() {
            score = 0;
            moves = 30;
            level = 1;
            gameActive = true;
            selectedCandy = null;
            
            document.getElementById('gameOver').style.display = 'none';
            
            initializeBoard();
            renderBoard();
            updateUI();
        }

        function hint() {
            if (!gameActive) return;
            
            // Find a possible move
            for (let i = 0; i < BOARD_SIZE; i++) {
                for (let j = 0; j < BOARD_SIZE; j++) {
                    // Check right
                    if (j < BOARD_SIZE - 1) {
                        const temp = board[i][j];
                        board[i][j] = board[i][j + 1];
                        board[i][j + 1] = temp;
                        
                        if (hasMatches()) {
                            // Swap back
                            board[i][j + 1] = board[i][j];
                            board[i][j] = temp;
                            
                            // Highlight the hint
                            const candy1 = document.querySelector(`[data-row="${i}"][data-col="${j}"]`);
                            const candy2 = document.querySelector(`[data-row="${i}"][data-col="${j + 1}"]`);
                            
                            candy1.style.boxShadow = '0 0 20px gold';
                            candy2.style.boxShadow = '0 0 20px gold';
                            
                            setTimeout(() => {
                                candy1.style.boxShadow = '';
                                candy2.style.boxShadow = '';
                            }, 2000);
                            
                            return;
                        }
                        
                        // Swap back
                        board[i][j + 1] = board[i][j];
                        board[i][j] = temp;
                    }
                    
                    // Check down
                    if (i < BOARD_SIZE - 1) {
                        const temp = board[i][j];
                        board[i][j] = board[i + 1][j];
                        board[i + 1][j] = temp;
                        
                        if (hasMatches()) {
                            // Swap back
                            board[i + 1][j] = board[i][j];
                            board[i][j] = temp;
                            
                            // Highlight the hint
                            const candy1 = document.querySelector(`[data-row="${i}"][data-col="${j}"]`);
                            const candy2 = document.querySelector(`[data-row="${i + 1}"][data-col="${j}"]`);
                            
                            candy1.style.boxShadow = '0 0 20px gold';
                            candy2.style.boxShadow = '0 0 20px gold';
                            
                            setTimeout(() => {
                                candy1.style.boxShadow = '';
                                candy2.style.boxShadow = '';
                            }, 2000);
                            
                            return;
                        }
                        
                        // Swap back
                        board[i + 1][j] = board[i][j];
                        board[i][j] = temp;
                    }
                }
            }
        }

        // Initialize game
        newGame();
    </script>
</body>
</html>